<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>VIGNESH VL</title>
    </head>
<body>
    <style>
       #canvas {
	width:450px;
	height:450px;
    border: 5px solid black;
    margin:auto;
}
#canvast{
	width:270px;
	height:270px;
    border: 5px solid black;
    margin:auto;
}
#puzz7,#puzz1,#puzz2,#puzz3,#puzz4,#puzz5,#puzz6,#puzz8{
	display:none;
}
body{
	background-color:rgba(53, 0, 139, 0.822);
}
#tileone{
	background-color: rgba(45, 100, 182, 0.425);
    font-size:50px;
     margin:auto;  
     margin-top:10px; 
     text-align:center; 
     color:black; 
}
#top{
    width:1200px; 
    margin:auto; 
    margin-top:10px; 
    text-align:center;
    
}
header{
    width:1190; height:100px;
     
     padding:5px;
}

#headpart{
	background:rgba(134, 16, 170, 0.795);
  border-radius:4px;
  color: #fff;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  padding: 15px 20px;
}
#resetbutton{
    background-color:rgba(167, 140, 125, 0.39);
    color:black;
    padding:5px;
    margin-top:50px;
    color:rgb(66, 30, 30);
}

#forabox{
    padding:10px;
    margin-top:5px;
    font-size:10px;
}
@media screen and (max-width:400px){
    #leftpart,#rightpart,#top{
        width:43%;
    }
}
 
    </style>
       <header><h1 id="tileone"> COLOUR TILES</h1></header>
    <div id="top" style="margin-top:10px; height:1000px;">

     	<div id="headpart" style="margin-top:10px; height:1000px;">
           
            <div>    
				 <div id="leftpart"style="width:50%; float:left; display:inline">
                     
					 <h1 id="message" style="text-align:center; height:30px"></h1>
                     <h1 id="messaget"style="text-align:center; height:30px"></h1>
                     
					 <div style="text-align:center; height:50px;">
                        
						 <h1 id="moves"></h1>
                     
					  </div>

                <div>
                
			     <canvas id="canvas" height="450px" width="450px"></canvas>
     
		 		</div>

 			</div>
      
	    	 <div id="rightpart"style=" margin-top:50px;padding-top:2px; text-align:center;float:right;width:50%; padding-top:10px">
                <h2 >Timer: <span id="time-left">120 </span> sec</h2>
	 			<h1 style="font-size:30px;color:black;"> IMAGE</h1>
                <canvas id="canvast" height="300px" width="300px"></canvas>
                <div>
                <p><br></p>
                <span id="resetbutton">Reset</span>
                </div id="forabox">
				<div style="margin:auto">
                     <img src="images/pic1.jpg" id="puzz1" width="90" height="90">
                     <img src="images/pic2.jpg" id="puzz2" width="90" height="90">
                     <img src="images/pic3.jpg" id="puzz3" width="90" height="90">
                     <img src="images/pic4.jpg" id="puzz4" width="90" height="90">
                     <img src="images/pic5.jpg" id="puzz5" width="90" height="90">
                     <img src="images/pic6.jpg" id="puzz6" width="90" height="90">
                     <img src="images/pic7.jpg" id="puzz7" width="450" height="450">
                     <img src="images/pic8.jpg" id="puzz8" width="450" height="450">
				</div> 
	</div>
</div>
<script >
    var canvas=document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var canvast=document.getElementById("canvast");
var ctxt = canvast.getContext("2d");
var empty=36;
var moves=-1;
var timeLeft=120;
var myInterval;
var score;
function shuffle(array) {
	  var currentIndex = array.length, temporaryValue, randomIndex;
	  while (0 !== currentIndex) {
	    randomIndex = Math.floor(Math.random() * currentIndex);
	    currentIndex -= 1;

	    // And swap it with the current element.
	    temporaryValue = array[currentIndex];
	    array[currentIndex] = array[randomIndex];
	    array[randomIndex] = temporaryValue;
	  }

	  return array;
	}
var ar=[1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,0];
var im=[1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,0];
var empty;
function initialize(){
 ar=shuffle([1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,0]);
 im=shuffle([1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,0]);
for(var i=0;i<=36;i++){
	if(im[i]==0)
		empty=i+1;
}
}
function timersec(){
	console.log(timeLeft);
	var timeLeftDisplay = document.getElementById('time-left');
	myInterval=setInterval(function(){
		if(timeLeft<=0){
			clearInterval(timeLeft=0);
			}
		timeLeftDisplay.innerHTML = timeLeft;
		timeLeft-=1;
		},1000);
}
function myStopFunction() {
	clearInterval(myInterval);
}
function originalimage(){
    
	while(ar[7]==0||ar[8]==0||ar[9]==0||ar[10]==0||ar[13]==0||ar[14]==0||ar[15]==0||ar[16]==0||ar[19]==0||ar[20]==0||ar[21]==0||ar[22]==0||ar[25]==0||ar[26]==0||ar[27]==0||ar[28]==0)
	{
	 ar=shuffle([1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,0]);
	}
	ctxt.fillStyle="white";
	ctxt.fillRect(0,0,300,300);
	for(var x=0;x<6;x++){
    	for(var y=0;y<6;y++){
        var a,b;
		a=x-1;b=y-1;
		            if((a<4)&&(b<4)&&(a>-1)&&(b>-1)){
						console.log('a:'+a);
						console.log('b:'+b);
			        var textt="puzz";
                    z=x+6*y;
                    z=ar[z];
                    textt=textt+z.toString();
                    if(z!=0)
                     {   console.log('text:'+textt);              
    	               var img=document.getElementById(textt);
    	               var patt=ctxt.createPattern(img,"repeat");
    	               ctxt.fillStyle=patt;
                    } 
    
                    else
                    {
    	               ctxt.fillStyle="white";
                    }
    
                      ctxt.fillRect(75*a,75*b,74,74);
				}
    	 }
       }
     }
var restart=0;
function won(){
	ctx.clearRect(0,0,450,450);
	var img=document.getElementById("puzz7");
	var pat=ctx.createPattern(img,"repeat");
	ctx.fillStyle=pat;
	ctx.fillRect(0,0,450,450);
	var m=document.getElementById("message");
	m.innerHTML="You won the game in "+moves.toString() +" moves";
    score=Math.floor(65000/moves);
	var mt=document.getElementById("messaget");
	mt.innerHTML="Your Score:"+score.toString();
	myStopFunction();
	
	restart=1;
	moves=-1;
}

function draw(){
	moves++;
  var mov=document.getElementById("moves");
	  mov.innerHTML="MOVES: "+ moves;
  var m=document.getElementById("message");
	m.innerHTML="";
  var t;
  t=0;
  if(restart==1){
	
	  im=shuffle([1,1,1,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4,4,5,5,5,5,5,5,6,6,6,6,6,0]);
		for(var i=0;i<=35;i++){
			if(im[i]==0)
				empty=i+1;
			
			
			}
		
		console.log(empty);
		
	 ctx.clearRect(0,0,450,450);
	  restart=0;
  }
        if(im[7]!=ar[7]||im[9]!=ar[9]||im[8]!=ar[8]||im[10]!=ar[10]||im[14]!=ar[14]||im[13]!=ar[13]||im[16]!=ar[16]||im[15]!=ar[15]||im[19]!=ar[19]||im[20]!=ar[20]||im[21]!=ar[21]||im[22]!=ar[22]||im[25]!=ar[25]||im[26]!=ar[26]||im[27]!=ar[27]||im[28]!=ar[28])
      {
          t=1;
          }
	console.log(im);
	console.log(ar);
	ctx.fillStyle="white";
	ctx.fillRect(0,0,450,450); 
	for(var i=0;i<6;i++){
    	for(var j=0;j<6;j++){
    		   component(i,j);    		
    	}
    }
	
	console.log(t);
	
	if(t==0){
		console.log("one more");
		won();
	}
	
}

function component(x, y) {
    
    var text="puzz";
    z=x+6*y;
    z=im[z];
    text=text+z.toString();
    if(z!=0)
    {
    	var img=document.getElementById(text);
    	     var pat=ctx.createPattern(img,"repeat");
    	     ctx.fillStyle=pat; 
    }
    
    else
    {
    	ctx.fillStyle="white";
    }
    ctx.fillRect(75*x+1,75*y+1,73,73);
       
}

function moveup() {
	ctx.clearRect(0,0,450,450);
	if(restart==1)
		{
		draw();
		return;
		}
    if(empty==31||empty==32||empty==33||empty==34||empty==35||empty==36){
    	
    	moves--;
    	draw();
    } 
    else{
    	
    	text="puzz";
    	var curr=empty;
    	empty=empty+6;
    	var next=empty;
        im[curr-1]=im[next-1];
        im[next-1]=0;
        draw();
    	
    }
    console.log(empty);
}

function movedown() {
	ctx.clearRect(0,0,450,450);
	if(restart==1)
	{
	
	draw();
	return;
	}
	if(empty==1||empty==2||empty==3||empty==4||empty==5||empty==6) {
		
		moves--;
		draw();
    }
    else{
    	
    		text="puzz";
    	var curr=empty;
    	empty=empty-6;
    	var next=empty;
        im[curr-1]=im[next-1];
        im[next-1]=0;
        draw();
        
    }
    
    console.log(empty);
    
}

function moveleft() {
	ctx.clearRect(0,0,450,450);
	
	if(restart==1)
	{
	
	draw();
	return;
	}
	
	if(empty==6||empty==12||empty==18||empty==24||empty==30||empty==36) {
		
		moves--;  
		draw();
	    }
	    else{
	    	
	    	text="puzz";
	    	var curr=empty;
	    	empty=empty+1;
	    	var next=empty;
	        im[curr-1]=im[next-1];
	        im[next-1]=0;
	        draw();
	    	
	  
	    }
	  console.log(empty);
}

function moveright() {
	ctx.clearRect(0,0,450,450);
	if(restart==1)
	{
	moves--;
	draw();
	return;
	}
	  if(empty==1||empty==7||empty==13||empty==19||empty==25||empty==31) {
		 
		  moves--;
		  draw();
	    }
	    else{
	    	
	    	text="puzz";
	    	var curr=empty;
	    	empty=empty-1;
	    	var next=empty;
	        im[curr-1]=im[next-1];
	        im[next-1]=0;
	        draw();
	    }console.log(empty);
	
	  }
	  
window.addEventListener('keydown', function (e) {
    key = e.keyCode;
    if(key==37){
    	e.preventDefault();
    	moveleft();
    }
    if(key==38){
    	e.preventDefault();
    	moveup();
    }
    if(key==39){
    	e.preventDefault();
    	moveright();
    }
    if(key==40){
    	e.preventDefault();
    	movedown();
    }
	if(key==13){
		e.preventDefault();
		moves=-1;
		initialize();
		originalimage();
		timersec();
		start();
	}
    
});
function start(){
draw();
}
ctx.font = "30px Arial";
ctx.fillText("Press Enter to start",55,230);

var resetbutton=document.getElementById("resetbutton");
resetbutton.addEventListener('click',resetFunction);
function resetFunction(){
	moves=-1;
	myStopFunction();
	initialize();
		originalimage();
		timeLeft=120;
		timersec();
		start();
	
}
</script>
</body>
</html>